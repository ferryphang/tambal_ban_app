<button id="show_instruction" class="half">Instructions</button>
<button id="show_comments" class="half">Comments</button>
<style type="text/css">
  .ui-group-buttons .or{position:relative;float:left;width:.3em;height:1.3em;z-index:3;font-size:12px}
.ui-group-buttons .or:before{position:absolute;top:50%;left:50%;content:'or';background-color:#5a5a5a;margin-top:-.1em;margin-left:-.9em;width:1.8em;height:1.8em;line-height:1.55;color:#fff;font-style:normal;font-weight:400;text-align:center;border-radius:500px;-webkit-box-shadow:0 0 0 1px rgba(0,0,0,0.1);box-shadow:0 0 0 1px rgba(0,0,0,0.1);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box}
.ui-group-buttons .or:after{position:absolute;top:0;left:0;content:' ';width:.3em;height:2.84em;background-color:rgba(0,0,0,0);border-top:.6em solid #5a5a5a;border-bottom:.6em solid #5a5a5a}
.ui-group-buttons .or.or-lg{height:1.3em;font-size:16px}
.ui-group-buttons .or.or-lg:after{height:2.85em}
.ui-group-buttons .or.or-sm{height:1em}
.ui-group-buttons .or.or-sm:after{height:2.5em}
.ui-group-buttons .or.or-xs{height:.25em}
.ui-group-buttons .or.or-xs:after{height:1.84em;z-index:-1000}
.ui-group-buttons{display:inline-block;vertical-align:middle}
.ui-group-buttons:after{content:".";display:block;height:0;clear:both;visibility:hidden}
.ui-group-buttons .btn{float:left;border-radius:0}
.ui-group-buttons .btn:first-child{margin-left:0;border-top-left-radius:.25em;border-bottom-left-radius:.25em;padding-right:15px}
.ui-group-buttons .btn:last-child{border-top-right-radius:.25em;border-bottom-right-radius:.25em;padding-left:15px}

</style>
 <div class="ui-group-buttons">
                <a href="http://www.jquery2dotnet.com" class="btn btn-success" role="button"><span class="glyphicon glyphicon-thumbs-up"></span></a>
                <div class="or"></div>
                <a href="http://www.jquery2dotnet.com" class="btn btn-danger" role="button"><span class="glyphicon glyphicon-thumbs-down"></span></a>
            </div>
<div id="instructions_container" class="well">
  <legend class="title"><span>Direction</span></legend>
  <ul id="instructions"></ul>
</div>
<div class="span6" id="comments">
  <table>
    <% @workshop.comment_threads.each do |comment| %>
      <tr> 
      <td width="10%"><%= link_to "ASd" user_path(comment.user.id) %></td>
      <td align="left"><%= comment.body %></td>
      </tr>
    <% end %>
  </table>
</div>
<hr>
<div id="map_canvas" style="height:550px;"></div>  
<button type="button" class="btn btn-info">Info</button>
<button type="button" class="btn btn-info">Info</button>

<script type="text/javascript">
var map;
$(document).ready(function(){
  $('#comments').hide();

  $('#instructions_container').hide();
  $('#show_instruction').click(function() {
    $( "#instructions_container" ).toggle();
  });
  $('#show_comments').click(function() {
    $( "#comments" ).toggle();
  });

  var coordinate = {
    origin: [<%= @user_location.first %>,<%= @user_location.last %>],
    destination: [<%= @workshop.location.latitude%>, <%= @workshop.location.longitude %>]
  }

  map = new GMaps({
    el: '#map_canvas',
    lat: coordinate.origin[0],
    lng: coordinate.origin[1],
    zoom: 17
  });
  map.hideContextMenu();
  map.addMarker({
    lat: coordinate.origin[0],
    lng: coordinate.origin[1],
    title: 'User Location',
    icon: "/assets/male.png"
  });

  map.addMarker({
    lat: coordinate.destination[0],
    lng: coordinate.destination[1],
    title: '<%= @workshop.name %>',
    icon: "<%= @workshop.category.marker.thumb.url %>"
  });

  <% @workshops.each do |workshop| %>
    map.addMarker({
      lat: <%= workshop.location.latitude %>,
      lng: <%= workshop.location.longitude %>,
      title: '<%= workshop.name %>',
      icon: "<%= workshop.category.marker.thumb.url %>"
    });
  <% end %>

  map.travelRoute({
    origin: coordinate.origin,
    destination: coordinate.destination,
    travelMode: 'walking',
    step: function(e) {
      $('#instructions').append('<li>'+e.instructions+'</li>');
      $('#instructions li:eq(' + e.step_number + ')').delay(420 * e.step_number).fadeIn("medium", function() {
        map.drawPolyline({
          path: e.path,
          strokeColor: '#FF0000',
          strokeOpacity: 0.5,
          strokeWeight: 10
        });  
      });
    }
  });

  map.getRoutes({
      origin: [<%= @user_location.first %>,<%= @user_location.last %>],
      destination: [<%= @workshop.location.latitude%>, <%= @workshop.location.longitude %>],
      avoidHighways: false,
      avoidTolls: false,
      travelMode: 'DRIVING',
      unitSystem: "IMPERIAL",
      callback: function (e) {
          var time = 0;
          var distance = 0;
          for (var i=0; i<e[0].legs.length; i++) {
              time += e[0].legs[i].duration.value;
              distance += e[0].legs[i].distance.value;
          }
          $('h3#Distance').text(distance*0.001 + ' KM from your position');
      }
  });

});


</script>